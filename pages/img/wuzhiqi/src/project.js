window.__require=function t(e,o,r){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,r)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<r.length;c++)i(r[c]);return i}({ChessPieceControl:[function(t,e,o){"use strict";cc._RF.push(e,"0569fxM5NdNRpzmz2yiALLV","ChessPieceControl");var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,s=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_spGuangquan=null,e.m_side=0,e}return r(e,t),e.prototype.start=function(){},e.prototype.setChessPieceSide=function(t){var e=this;this.m_side=t,0==this.m_side?cc.loader.loadRes("img_white1",function(t,o){e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}):cc.loader.loadRes("img_black1",function(t,o){e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},e.prototype.replaceChessPiece=function(){var t=this;0==this.m_side?cc.loader.loadRes("img_white",function(e,o){t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}):cc.loader.loadRes("img_black",function(e,o){t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},e.prototype.setPosition=function(t){this.node.x=t.x,this.node.y=t.y},e.prototype.getPieceSide=function(){return this.m_side},e.prototype.showGuangquan=function(){this.m_spGuangquan.node.active=!0},i([s(cc.Sprite)],e.prototype,"m_spGuangquan",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Helloworld:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,s=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){this.label.string=this.text},i([s(cc.Label)],e.prototype,"label",void 0),i([s],e.prototype,"text",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PlaySceneControl:[function(t,e,o){"use strict";cc._RF.push(e,"069f435yhlDpbsuZrHcjzeV","PlaySceneControl");var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var n,c=cc._decorator,s=c.ccclass,a=c.property,l=t("./WuziqiAIModule");(function(t){t[t.E_GAME_Ready=0]="E_GAME_Ready",t[t.E_GAME_PlayerThinking=1]="E_GAME_PlayerThinking",t[t.E_GAME_AIThinking=2]="E_GAME_AIThinking",t[t.E_GAME_Over=3]="E_GAME_Over"})(n||(n={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_pfbChessPiece=null,e.m_lbAIStepTime=null,e.m_lbPlayerStepTime=null,e.m_lbTotalTime=null,e.m_lbSteps=null,e.m_ltGameOver=null,e.m_curPlaySide=0,e.m_playerSide=0,e.m_board=[],e.m_prevPlayBoardPos=null,e.m_totalTime=0,e.m_stepTime=0,e.m_steps=0,e.m_gameStatus=n.E_GAME_Ready,e.m_spOverTitle=null,e}return r(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartCallBack,this),this.m_ltGameOver.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartCallBack,this),this.m_ltGameOver.node.active=!1,this.m_ltGameOver.node.zIndex=10,this.m_ltGameOver.node.getChildByName("BtnRestart").on(cc.Node.EventType.TOUCH_START,this.onTouchBtnCallBack,this),this.m_ltGameOver.node.getChildByName("BtnReturn").on(cc.Node.EventType.TOUCH_START,this.onTouchBtnCallBack,this),this.m_spOverTitle=this.m_ltGameOver.node.getChildByName("SpTitle").getComponent(cc.Sprite),this.node.getChildByName("BtnRestart").on(cc.Node.EventType.TOUCH_START,this.onTouchBtnCallBack,this),this.node.getChildByName("BtnReturn").on(cc.Node.EventType.TOUCH_START,this.onTouchBtnCallBack,this),this.node.getChildByName("BtnHint").on(cc.Node.EventType.TOUCH_START,this.onTouchBtnCallBack,this);for(var t=0;t<15;t++){this.m_board.push([]);for(var e=0;e<15;e++){this.m_board[t].push(null)}}},e.prototype.start=function(){this.initGame()},e.prototype.clearBoard=function(){for(var t=0;t<15;t++)for(var e=0;e<15;e++)null!=this.m_board[t][e]&&(this.m_board[t][e].destroy(),this.m_board[t][e]=null)},e.prototype.initGame=function(){var t=this;this.clearBoard(),this.m_curPlaySide=Math.round(Math.random()),this.m_playerSide=Math.round(Math.random()),this.m_totalTime=0,this.m_stepTime=20,this.m_steps=0,this.m_prevPlayBoardPos=null,this.m_lbTotalTime.string="\u5c40\u65f6:"+this.getTimeTypeString(this.m_totalTime),this.m_lbAIStepTime.string="\u6b65\u65f6:"+this.m_stepTime.toString()+"s",this.m_lbPlayerStepTime.string="\u6b65\u65f6:"+this.m_stepTime.toString()+"s",this.m_lbSteps.string="\u6b65\u6570:"+this.m_steps.toString(),this.m_gameStatus=n.E_GAME_Ready,this.scheduleOnce(function(e){t.m_curPlaySide==t.m_playerSide?t.m_gameStatus=n.E_GAME_PlayerThinking:(t.m_gameStatus=n.E_GAME_AIThinking,t.scheduleOnce(t.getAIThinking,1+2*Math.random()))},.5)},e.prototype.update=function(t){this.m_gameStatus!=n.E_GAME_PlayerThinking&&this.m_gameStatus!=n.E_GAME_AIThinking||(this.m_totalTime+=t,this.m_lbTotalTime.string="\u5c40\u65f6:"+this.getTimeTypeString(Math.floor(this.m_totalTime)),this.m_stepTime-=t,this.m_curPlaySide==this.m_playerSide?this.m_lbPlayerStepTime.string="\u6b65\u65f6:"+Math.floor(this.m_stepTime).toString()+"s":this.m_lbAIStepTime.string="\u6b65\u65f6:"+Math.floor(this.m_stepTime).toString()+"s",this.m_stepTime<=0&&(this.m_gameStatus=n.E_GAME_Over,this.m_curPlaySide==this.m_playerSide?this.showGameOver(1):this.showGameOver(2)))},e.prototype.onTouchBtnCallBack=function(t){var e=t.target;"BtnReturn"==e.name?cc.director.loadScene("StartScene"):"BtnRestart"==e.name?(this.m_ltGameOver.node.active=!1,this.initGame()):"BtnHint"==e.name&&this.getAIThinking()},e.prototype.onTouchStartCallBack=function(t){if(this.m_gameStatus==n.E_GAME_PlayerThinking){var e=t.getLocation().sub(cc.v2(cc.winSize.width/2,cc.winSize.height/2)),o=this.getBoardPos(e);void 0!=o&&null==this.m_board[o.x][o.y]&&this.dealMoveChess(o)}},e.prototype.getBoardPos=function(t){cc.v2(-336,-336);for(var e=0;e<15;e++)for(var o=0;o<15;o++){var r=this.getGamePosByBoardPos(cc.v2(e,o));if(cc.rect(r.x-24,r.y-24,48,48).contains(t))return cc.v2(e,o)}},e.prototype.getGamePosByBoardPos=function(t){var e=cc.v2(-336,-336);return cc.v2(e.x+48*t.x,e.y+48*t.y)},e.prototype.dealMoveChess=function(t){var e=this;this.m_board[t.x][t.y]=cc.instantiate(this.m_pfbChessPiece);var o=this.m_board[t.x][t.y].getComponent("ChessPieceControl");(o.setPosition(this.getGamePosByBoardPos(t)),o.setChessPieceSide(this.m_curPlaySide),this.node.addChild(this.m_board[t.x][t.y]),null!=this.m_prevPlayBoardPos)&&this.m_board[this.m_prevPlayBoardPos.x][this.m_prevPlayBoardPos.y].getComponent("ChessPieceControl").replaceChessPiece();this.m_prevPlayBoardPos=t,this.m_stepTime=20,this.m_lbAIStepTime.string="\u6b65\u65f6:"+this.m_stepTime.toString()+"s",this.m_lbPlayerStepTime.string="\u6b65\u65f6:"+this.m_stepTime.toString()+"s",this.m_steps++,this.m_lbSteps.string="\u6b65\u6570:"+this.m_steps.toString();var r=0==this.m_curPlaySide?"bai":"hei";cc.loader.loadRes(r,function(t,e){cc.audioEngine.play(e,!1,1)});var i=this.checkGameOver();i>0?(this.m_gameStatus=n.E_GAME_Over,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(t,o){e.showGameOver(o)},this,i)))):(this.m_curPlaySide=1-this.m_curPlaySide,this.m_curPlaySide==this.m_playerSide?this.m_gameStatus=n.E_GAME_PlayerThinking:(this.m_gameStatus=n.E_GAME_AIThinking,this.scheduleOnce(this.getAIThinking,1+2*Math.random())))},e.prototype.getTimeTypeString=function(t){var e=Math.floor(t/60),o=Math.floor(t%60),r="";return r=e<10?"0"+e.toString()+":":e.toString()+":",r+=o<10?"0"+o.toString():o.toString()},e.prototype.getBoardInfor=function(){for(var t=[],e=0;e<15;e++){t.push([]);for(var o=0;o<15;o++)if(null==this.m_board[e][o])t[e].push(-1);else{var r=this.m_board[e][o].getComponent("ChessPieceControl");t[e].push(r.getPieceSide())}}return t},e.prototype.getAIThinking=function(){var t=this.getBoardInfor(),e=l.default.think(t,this.m_curPlaySide);this.dealMoveChess(e)},e.prototype.checkGameOver=function(){for(var t=l.default.findAllTupleByPos(this.m_prevPlayBoardPos.x,this.m_prevPlayBoardPos.y),e=this.getBoardInfor(),o=0;o<t.length;o++){for(var r=!0,i=e[t[o].posArray[0].x][t[o].posArray[0].y],n=1;n<5;n++)if(e[t[o].posArray[n].x][t[o].posArray[n].y]!=i||-1==i){r=!1;break}if(r){for(n=0;n<5;n++){this.m_board[t[o].posArray[n].x][t[o].posArray[n].y].getComponent("ChessPieceControl").showGuangquan()}return this.m_curPlaySide==this.m_playerSide?2:1}}var c=!0;for(o=0;o<15;o++){for(var s=0;s<15;s++)if(-1==e[o][s]){c=!1;break}if(!c)break}return c?3:0},e.prototype.showGameOver=function(t){var e=this;this.m_ltGameOver.node.active=!0;cc.loader.loadRes(["img_overTitle1","img_overTitle2","img_overTitle3"][t-1],cc.SpriteFrame,function(t,o){e.m_spOverTitle.spriteFrame=o});cc.loader.loadRes(["loss","win","draw"][t-1],function(t,e){cc.audioEngine.play(e,!1,1)})},i([a(cc.Prefab)],e.prototype,"m_pfbChessPiece",void 0),i([a(cc.Label)],e.prototype,"m_lbAIStepTime",void 0),i([a(cc.Label)],e.prototype,"m_lbPlayerStepTime",void 0),i([a(cc.Label)],e.prototype,"m_lbTotalTime",void 0),i([a(cc.Label)],e.prototype,"m_lbSteps",void 0),i([a(cc.Layout)],e.prototype,"m_ltGameOver",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./WuziqiAIModule":"WuziqiAIModule"}],StartSceneControl:[function(t,e,o){"use strict";cc._RF.push(e,"50705KnLQdGdo+z3aVbxjqm","StartSceneControl");var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,s=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_btnOneMode=null,e}return r(e,t),e.prototype.start=function(){this.m_btnOneMode.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBtnCallBack,this)},e.prototype.onTouchBtnCallBack=function(t){"BtnOneMode"==t.target.name&&cc.director.loadScene("PlayScene")},i([s(cc.Button)],e.prototype,"m_btnOneMode",void 0),e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],WuziqiAIModule:[function(t,e,o){"use strict";cc._RF.push(e,"73128QCIXxEaqNEK8ChoDJr","WuziqiAIModule");var r=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=(i.property,function(){return function(){this.posArray=[]}}());o.Tuple=c;var s=function(){return function(){this.pos=cc.v2(),this.score=0}}(),a=function(){function t(){}return t.think=function(t,e){for(var o=[],r=0,i=0;i<15;i++)for(var n=0;n<15;n++)if(-1==t[i][n]){var c=this.calculateScoreForPos(t,e,i,n);if(c>r){for(r=c;o.pop(););(a=new s).pos=cc.v2(i,n),a.score=c,o.push(a)}else if(c==r){var a;(a=new s).pos=cc.v2(i,n),a.score=c,o.push(a)}}return o[Math.floor(Math.random()*o.length)].pos},t.calculateScoreForPos=function(t,e,o,r){for(var i=[0,35,800,15e3,8e5],n=[0,15,400,1800,1e5],c=this.findAllTupleByPos(o,r),s=0,a=c.length,l=0;l<a;l++){for(var p=0,h=0,u=0,_=0;_<5;_++){var m=t[c[l].posArray[_].x][c[l].posArray[_].y];0==m?h++:1==m?u++:p++}s+=5==p?7:0!=h&&0!=u?0:0!=h&&0==e||0!=u&&1==e?i[5-p]:n[5-p]}return s},t.findAllTupleByPos=function(t,e){for(var o=[],r=t-4;r<=t;r++)if(!(r<0||r+4>=15)){for(var i=new c,n=0;n<5;n++)i.posArray.push(cc.v2(r+n,e));o.push(i)}for(var s=e-4;s<=e;s++)if(!(s<0||s+4>=15)){for(i=new c,n=0;n<5;n++)i.posArray.push(cc.v2(t,s+n));o.push(i)}for(var a=t-4,l=e-4;a<=t&&l<=e;)if(a<0||a+4>=15||l<0||l+4>=15)a++,l++;else{for(i=new c,n=0;n<5;n++)i.posArray.push(cc.v2(a+n,l+n));o.push(i),a++,l++}for(a=t+4,l=e-4;a>=t&&l<=e;)if(a-4<0||a>=15||l<0||l+4>=15)a--,l++;else{for(i=new c,n=0;n<5;n++)i.posArray.push(cc.v2(a-n,l+n));o.push(i),a--,l++}return o},t=r([n],t)}();o.default=a,cc._RF.pop()},{}]},{},["ChessPieceControl","Helloworld","PlaySceneControl","StartSceneControl","WuziqiAIModule"]);