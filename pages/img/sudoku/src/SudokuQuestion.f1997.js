var game,__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function s(e){try{u(r.next(e))}catch(t){a(t)}}function o(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return u([e,t])}}function u(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(o){a=[6,o],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},__read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s};(function(e){var t=function(){function e(e,t,n,r){void 0===r&&(r=0),this.question=[],this.right=[],this.type=0,this.gameScene=0,this.difficulty=0,this.level=0,this.date=0,this.id=0,this.question=e,this.right=t,this.type=n,this.id=r}return e.getQuestionLevel=function(t,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadQuestionBySubPackage("extreme",t,n,200)];case 1:return(r=i.sent()).gameScene=e.GAMESCENE_LEVEL,r.difficulty=t,r.level=n,[2,r]}})})},e.getQuestionLevelTotal=function(t){switch(t){case e.DIFFICULTY_NEWPEOPLE:case e.DIFFICULTY_SIMPLE:case e.DIFFICULTY_MIDDLE:case e.DIFFICULTY_HIGH:case e.DIFFICULTY_EXPERT:case e.DIFFICULTY_GRANDMASTER:return 1e3}},e.getQuestionNewPlayer=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return t+=2,[4,this.loadQuestionBySubPackage("newPlayer",e,Math.abs(t),160)];case 1:return[2,n.sent()]}})})},e.getQuestionDaily=function(t,n,r){return __awaiter(this,void 0,void 0,function(){var i,a,s;return __generator(this,function(o){switch(o.label){case 0:return i=null,r<0?[4,this.getQuestionNewPlayer(t,r)]:[3,2];case 1:return i=o.sent(),[3,6];case 2:return a=storagecache.LocalStorage.getItem("user_group"),s=e.levelInfos[t-1],a>2&&s?[4,this.loadQuestionByFile(s[r].fileName,s[r].lineNum)]:[3,4];case 3:return i=o.sent(),[3,6];case 4:return r>4499&&(r=4499),[4,this.loadQuestionBySubPackage("daily",t,r,300)];case 5:i=o.sent(),o.label=6;case 6:return i.gameScene=e.GAMESCENE_DAILY,i.difficulty=t,i.level=r,i.date=n,[2,i]}})})},e.getQuestionHome=function(t,n){return __awaiter(this,void 0,void 0,function(){var r,i,a;return __generator(this,function(s){switch(s.label){case 0:return r=null,n<0?[4,this.getQuestionNewPlayer(t,n)]:[3,2];case 1:return r=s.sent(),[3,6];case 2:return i=storagecache.LocalStorage.getItem("user_group"),a=e.levelInfos[t-1],i>2&&a?(console.log("=========>>difficultyInfo",a[n],n),[4,this.loadQuestionByFile(a[n].fileName,a[n].lineNum)]):[3,4];case 3:return r=s.sent(),[3,6];case 4:return n>4499&&(n=4499),[4,this.loadQuestionBySubPackage("daily",t,n,300)];case 5:r=s.sent(),s.label=6;case 6:return r.difficulty=t,r.level=n,r.gameScene=e.GAMESCENE_HOME,[2,r]}})})},e.getQuestionActivity=function(t,n){return __awaiter(this,void 0,void 0,function(){var r,i,a;return __generator(this,function(s){switch(s.label){case 0:return r=null,n<0?[4,this.getQuestionNewPlayer(t,n)]:[3,2];case 1:return r=s.sent(),[3,6];case 2:return i=storagecache.LocalStorage.getItem("user_group"),a=e.levelInfos[t-1],i>2&&a?[4,this.loadQuestionByFile(a[n].fileName,a[n].lineNum)]:[3,4];case 3:return r=s.sent(),[3,6];case 4:return n>4499&&(n=4499),[4,this.loadQuestionBySubPackage("daily",t,n,300)];case 5:r=s.sent(),s.label=6;case 6:return r.difficulty=t,r.level=n,r.gameScene=e.GAMESCENE_ACTIVITY,[2,r]}})})},e.loadQuestionBySubPackage=function(t,n,r,i){return __awaiter(this,void 0,void 0,function(){var a,s;return __generator(this,function(o){switch(o.label){case 0:return[4,new Promise(function(e,a){var s="question/"+t+"_"+n.toString()+"_"+(Math.floor(r/i)+1).toString();console.log("sub package file",s),cc.resources.load(s,cc.TextAsset,function(t,n){if(t)return a(t);e(n.text),cc.assetManager.releaseAsset(n)})})];case 1:return a=o.sent(),s=a.replace(/^\s+|\s+$/g,"").split(/\r\n|\r|\n/),r%=s.length,console.log("sub package file level",r),[2,e.unserialize(s[r].replace(/^\s+|\s+$/g,""))]}})})},e.loadQuestionByFile=function(t,n){return __awaiter(this,void 0,void 0,function(){var r,i;return __generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(e,n){var r="question/"+t;console.log("====>>>sub package file",r),cc.resources.load(r,cc.TextAsset,function(t,r){if(t)return n(t);e(r.text),cc.assetManager.releaseAsset(r)})})];case 1:return r=a.sent(),i=r.replace(/^\s+|\s+$/g,"").split(/\r\n|\r|\n/),console.log("====>>>sub package file lineNum",n),[2,e.unserialize(i[n].replace(/^\s+|\s+$/g,""))]}})})},e.serialize=function(t,n){var r=t.type.toString();switch(t.type){case e.TYPE_9:for(var i=__read(["",""],2),a=i[0],s=i[1],o=0;o<9;o++)a=t.question.slice(9*o,9*o+9).join(""),s=t.right.slice(9*o,9*o+9).join(""),r+=(a=("000000"+Number.parseInt(a).toString(32)).substr(-6))+(s=("000000"+Number.parseInt(s).toString(32)).substr(-6));var u=8-n.toString().length;r="0".repeat(u)+n.toString()+r}return r},e.unserialize=function(t){var n=parseInt(t.slice(0,8));t=t.slice(8);var r=Number.parseInt(t[0]),i=[],a=[];switch(r){case e.TYPE_9:for(var s=__read(["",""],2),o=s[0],u=s[1],c=0;c<9;c++){o=t.substr(12*c+1,6),u=t.substr(7+12*c,6),o=("000000000"+Number.parseInt(o,32).toString()).substr(-9),u=("000000000"+Number.parseInt(u,32).toString()).substr(-9);for(var l=0;l<9;l++)i.push(Number.parseInt(o[l])),a.push(Number.parseInt(u[l]))}return new e(i,a,r,n)}return null},e.TYPE_9=9,e.TYPE_6=6,e.GAMESCENE_DAILY=1,e.GAMESCENE_LEVEL=2,e.GAMESCENE_HOME=3,e.GAMESCENE_ACTIVITY=4,e.DIFFICULTY_NEWPEOPLE=1,e.DIFFICULTY_SIMPLE=2,e.DIFFICULTY_MIDDLE=3,e.DIFFICULTY_HIGH=4,e.DIFFICULTY_EXPERT=5,e.DIFFICULTY_GRANDMASTER=6,e.levelInfos=[],e}();e.SudokuQuestion=t})(window.game||(window.game={}));